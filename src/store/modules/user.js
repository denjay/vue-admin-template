import { logout, getPermissions, isSuper } from '@/api/login'
import { getToken, removeToken } from '@/utils/auth'

const user = {
  state: {
    token: getToken(),
    name: '',
    avatar: '',
    permissions: null,
    isSuper: false
  },

  mutations: {
    SET_TOKEN: (state, token) => {
      state.token = token
    },
    SET_NAME: (state) => {
      state.name = window.Auth.username()
    },
    SET_AVATAR: (state) => {
      state.avatar = 'data:image/png;base64,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'
    },
    SET_PERMISSIONS: (state, permissions) => {
      state.permissions = permissions
    },
    SET_ROLE: (state, isSuper) => {
      state.isSuper = isSuper
    }
  },

  actions: {
    // 登录
    // Login({ commit }, userInfo) {
    //   const username = userInfo.username.trim()
    //   return new Promise((resolve, reject) => {
    //     login(username, userInfo.password).then(response => {
    //       const data = response.data
    //       setToken(data.token)
    //       commit('SET_TOKEN', data.token)
    //       resolve()
    //     }).catch(error => {
    //       reject(error)
    //     })
    //   })
    // },

    // 获取用户信息和权限
    GetPermissions({ commit, state }) {
      return new Promise((resolve, reject) => {
        getPermissions().then(response => {
          const data = response.data
          if (data instanceof Object && data.toString() === '[object Object]') { // 验证是否返回permissions
            commit('SET_PERMISSIONS', data)
          } else {
            reject('getPermissions: permissions must be object !')
          }
          commit('SET_NAME')
          commit('SET_AVATAR', data.avatar)
          resolve(response)
        }).catch(error => {
          reject(error)
        })
      })
    },

    // 获取用户角色（是否为super)
    GetRole({ commit, state }) {
      return new Promise((resolve, reject) => {
        isSuper().then(response => {
          commit('SET_ROLE', response.data.data)
          resolve(response)
        }).catch(error => {
          reject(error)
        })
      })
    },

    // 登出
    LogOut({ commit, state }) {
      return new Promise((resolve, reject) => {
        logout(state.token).then(() => {
          commit('SET_TOKEN', '')
          commit('SET_PERMISSIONS', [])
          removeToken()
          resolve()
        }).catch(error => {
          reject(error)
        })
      })
    },

    // 前端 登出
    FedLogOut({ commit }) {
      return new Promise(resolve => {
        commit('SET_TOKEN', '')
        removeToken()
        resolve()
      })
    }
  }
}

export default user
